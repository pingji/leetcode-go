# Solutions

## solution 1：回溯

### 解题思路

N皇后问题是经典的回溯算法问题。要求在一个n×n的棋盘上放置n个皇后，使得它们互不攻击。

**核心思想：**
1. **逐行放置**：每次只在一行放置一个皇后，避免同行冲突
2. **剪枝优化**：在放置前检查是否与已放置的皇后冲突
3. **回溯搜索**：当某个位置无法放置时，回退到上一步尝试其他位置

**冲突检查：**
- **同行冲突**：检查当前行左侧是否已有皇后
- **同列冲突**：检查当前列上方是否已有皇后  
- **对角线冲突**：检查左上和右上对角线是否已有皇后
  - 左上对角线：`row-i == col-j` (左上对角线)
  - 右上对角线：`row-i == j-col` (右上对角线)

**对角线检查 - 等腰三角形原理：**

```
4×4棋盘示例，在位置(2,1)放置皇后Q：

   0  1  2  3
0  .  .  .  .
1  .  .  .  .
2  .  Q  .  .  ← 当前位置(2,1)
3  .  .  .  .

以当前位置为顶点，向上形成等腰三角形：

   0  1  2  3
0  .  .  .  ↗  ← 右上边检查点
1  .  ↗  .  .  ← 右上边检查点  
2  .  Q  .  .  ← 顶点(当前位置)
3  .  .  .  .

   0  1  2  3
0  .  .  .  .
1  ↖  .  .  .  ← 左上边检查点
2  .  Q  .  .  ← 顶点(当前位置)
3  .  .  .  .

等腰三角形特性：
- 两条斜边长度相等：|右上边| = |左上边|
- 右上边：向右上方延伸，j坐标递增
- 左上边：向左上方延伸，j坐标递减
- 检查时只需遍历上方行，计算对应列位置

计算公式：
- 右上对角线：row-i == j-col  (从当前位置向右上方)
- 左上对角线：row-i == col-j  (从当前位置向左上方)

几何意义：
- row-i：当前位置到上方行的距离
- col-j：当前位置到左侧列的距离  
- j-col：当前位置到右侧列的距离
- 当距离相等时，说明在同一条对角线上
```

**算法步骤：**
1. 初始化n×n棋盘，所有位置设为"."
2. 从第0行开始，逐行尝试放置皇后
3. 对于每一行，遍历所有列位置
4. 检查当前位置是否有效（不与已放置的皇后冲突）
5. 如果有效，放置皇后并递归处理下一行
6. 如果无效或处理完所有行，回溯到上一步
7. 当放置完n个皇后时，记录当前解

**时间复杂度：** O(n!) - 最坏情况下需要尝试n!种排列
**空间复杂度：** O(n²) - 存储棋盘状态

**优化点：**
- 使用位运算可以进一步优化冲突检查
- 利用对称性可以减少一半的计算量

